<!DOCTYPE html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MarkdownD</title>

    <link rel="stylesheet" type="text/css" media="screen" href="styles/fonts/style.css" />
    <!--<link rel="stylesheet" type="text/css" media="screen" href="common/editor.md/1.4.5/editor.md/css/editormd.min.css"/>-->
    <link rel="stylesheet" type="text/css" media="screen" href="common/editor.md/1.5.0/editor.md/css/editormd.min.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="common/mui/mui-0.1.2/css/mui.min.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="common/jquery/PrintArea/css/jquery.printarea.css"/>

    <link rel="stylesheet" type="text/css" media="screen" href="styles/style.css"/>
</head>
<body>
<div id="g-wrapper">
    <header id="app-header" class="header-shadow">
        <nav class="mui-appbar" role="navigation">
            <div class="mui-container">
                <div class="mui-row">
                    <div class="mui-col-md-1 mui-text-left">
                        <a id="appbar-sidenav-toggle" href="#/leftNav"><i class="icon-menu"></i></a>
                    </div>
                    <div class="mui-col-md-10 mui-text-display2">
                        <span id="nav-title"></span>
                    </div>
                    <div class="mui-col-md-1 mui-text-right">
                        <span id="appbar-help" ><i class="icon-help"></i></span>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <div class="mui-appbar-height"></div>
    <div class="mui-container app-content-container">
        <div id="view-files" style="display: none"></div>
        <div id="view-workspace" style="display: none"></div>
        <div id="view-plugins" style="display: none"></div>
        <div id="view-settings" style="display: none"></div>
        <div id="view-about" style="display: none"></div>
        <div id="view-print" style="display: none"></div>
    </div>
    <div id="leftNav" style="display: none"></div>
    <input id="g-input-file" type="file" class="mui-form-control" style="display: none">
</div>


<script id="tpl_leftNav" type='text/html'>
    <!--左侧导航-->
    <nav id="sidenav">
        <ul>
            {{each navList as value i}}
            <li>
                <button class="mui-btn mui-btn-default mui-btn-flat mui-text-left {{ value.class  }}"
                        onclick="window.location.href='{{ value.href }}'"> {{ value.name }}
                </button>
            </li>
            {{/each}}
        </ul>
    </nav>
</script>

<script id="tpl_files" type='text/html'>
    <!--文件视图-->
    <div class="mui-panel">
        <ul>
                    {{each files as obj i}}
            <li data-id="fileId_{{ obj.id }}">
                <section class="mui-row">

                    <span class="mui-col-md-8 mui-col-xs-8">
                        <div class="mui-row">
                            <i class="mui-col-md-1 mui-col-xs-1">
                                <label>{{ i+1 }}</label>
                            </i>
                            <i class="mui-col-md-3 mui-col-xs-3">
                                <input type="text" class="mui-form-control" data-id="{{ obj.id }}" data-field="name" value="{{ obj.name }}" title="{{promptRenameFileTag}}">
                            </i>
                            <i class="mui-col-md-8 mui-col-xs-8">
                                <input type="text" class="mui-form-control mui-text-center" data-id="{{ obj.id }}" data-field="path" value="{{ obj.path }}" title="{{ obj.path }}" readonly>
                            </i>
                        </div>

                    </span>
                    <i class="mui-col-md-4 mui-col-xs-4">
                        <fieldset>
                            <button class="mui-btn mui-btn-primary mui-btn-flat icon-edit" title="{{btnLoadTitle}}" onclick="window.UI.c$.UIActions.loadFile('{{ obj.id  }}')"></button>
                            <button class="mui-btn mui-btn-primary mui-btn-flat icon-save" title="{{btnSaveTitle}}" onclick="window.UI.c$.UIActions.saveFile('{{ obj.id }}')"></button>
                            <button class="mui-btn mui-btn-primary mui-btn-flat icon-delete" title="{{btnRemoveTitle}}" onclick="window.UI.c$.UIActions.removeFilesItem('{{  obj.id }}')"></button>
                        </fieldset>
                    </i>
                </section>
            </li>
            {{/each}}
        </ul>
        <button class="mui-btn mui-btn-primary mui-btn-raised" onclick="window.UI.c$.UIActions.createNew()">{{btnNewFileTitle}}</button>
        <button class="mui-btn mui-btn-primary mui-btn-raised" onclick="window.UI.c$.UIActions.importFiles()">{{btnImportTitle}}</button>
        <p>
            <em class="icon-live-help">{{emLabel}}</em>
            <strong>
                {{noteLabel}}
            </strong>
        </p>
    </div>
</script>

<script id="tpl_workspace" type='text/html'>
    <!--主要编辑器部分-->
</script>

<script id="tpl_pluginsMgr" type='text/html'>
    <!--插件视图-->
    <div class="mui-panel">
        <div class="mui-z5 mui-text-right">
            {{ if (enableBuyRestoreBtn) }}
            <button class="mui-btn mui-btn-accent mui-btn-raised" onclick="window.UI.c$.UIActions.buyRestore()">
                {{btnBuyRestoreTitle}}
            </button>
            {{ /if }}
        </div>

        <div class="mui-panel">
            {{each plugins as obj i}}
            <section class="mui-row">
                <div class="mui-col-md-1">
                    <a rel target="_blank">
                        <img class="plugin-screen" src="{{ obj.imageUrl }}">
                    </a>
                </div>
                <div class="mui-col-md-9">
                    <div class="mui-row">
                        <span class="mui-text-title">{{ obj.name }}</span>
                    </div>
                    <div class="mui-row">
                        <span class="mui-text-caption">{{ obj.description }}</span>
                    </div>
                </div>
                <div class="mui-col-md-2 mui-text-right">
                    <a data-id="{{ obj.id }}">
                        {{if (obj.quantity == 0 && obj.inAppStore == true)}}

                        <button class="mui-btn mui-btn-danger mui-btn-raised"
                                onclick="window.UI.c$.UIActions.buyPlugin('{{ obj.id }}')">{{btnBuyTitle}}
                        </button>
                        {{else}}
                        <button class="mui-btn mui-btn-default mui-btn-flat" disabled>
                        </button>
                        {{/if}}
                    </a>
                </div>
            </section>
            {{/each}}
        </div>
    </div>
</script>

<script id="tpl_settings" type='text/html'>
    <!--设置-->
    <div class="mui-panel">
        <section class="mui-z3 mui-panel">
            <legend>{{ document.label }}</legend>
            <ul>
                {{ each document.keys as key i }}
                <li class="mui-row">

                    <i class="mui-col-lg-6 mui-col-md-6 mui-col-xs-6">
                        <label>
                            {{ if (typeof document.data[key] == "boolean")  }}
                            <input data-field="{{document.dataKey}}.{{key}}" type="checkbox" {{ document.data[key]==true ? checked='checked' : null  }}/>
                            {{ else }}
                            <!--<input data-field="{{document.dataKey}}.{{key}}" type="checkbox" {{ document.data[key]==true ? checked='checked' : null  }} disabled/>-->
                            {{ /if }}
                            {{ i+1 }}.{{document.key2I18NMap[key]}}
                        </label>
                    </i>

                    <i class="mui-col-md-2 mui-col-xs-2">
                        {{ if (typeof document.data[key] == "number")  }}
                        <input type="text" class="mui-form-control" data-field="{{document.dataKey}}.{{key}}" value="{{ document.data[key] }}">
                        {{ /if }}
                    </i>

                </li>
                {{ /each }}
            </ul>
        </section>

        <section class="mui-z3 mui-panel">
            <legend>{{ editor.label }}</legend>
            <ul>
                {{ each editor.keys as key i }}
                <li class="mui-row">
                    <i class="mui-col-lg-6 mui-col-md-6 mui-col-xs-6">
                        <label>
                            {{ if (typeof editor.data[key] == "boolean")  }}
                            <input data-field="{{editor.dataKey}}.{{key}}" type="checkbox" {{ editor.data[key]==true ? checked='checked' : null  }}/>
                            {{ /if }}
                            <span>{{ i+1 }}.{{editor.key2I18NMap[key]}}</span>
                        </label>
                    </i>

                </li>
                {{ /each }}
            </ul>
        </section>
    </div>
</script>

<script id="tpl_about" type='text/html'>
    <!--关于部分-->
    <div class="mui-panel">
        <div class="mui-row">
            <div class="mui-col-lg-1 mui-col-md-1 mui-col-xs-2">
                <img src="{{ logoUrl }}" />
            </div>
            <div class="mui-col-lg-8 mui-col-md-8 mui-col-xs-8">
                <strong class="mui-align-middle mui-text-subhead">{{ appName }} Ver.{{ version }}</strong>
                <p>
                    {{ description }}
                </p>
            </div>
        </div>
        <div class="mui-text-left">
            <div>
                <strong>{{ copyright }}</strong>
            </div>
            <div>
                <strong>{{ appName }} {{ creditsTitle }}</strong>
            </div>
        </div>
        <!--使用第三方软件信息-->
        <div class="mui-panel ref-credits">
            <ul>
            {{each credits as creditObj j}}
                <li>
                    <section class="mui-row">
                        <div class="third-product">
                            <div class="mui-col-md-10 mui-col-xs-8 mui-col-lg-10">
                                <span class="">{{ j+1 }}. {{ creditObj.title }}</span>
                            </div>
                            <div class="mui-col-md-1 mui-col-xs-2 mui-col-lg-1 mui-text-center">
                                <a class="third-homepage" data-url="{{ creditObj.homepageUrl }}">HomePage</a>
                            </div>
                            <div class="mui-col-md-1 mui-col-xs-2 mui-col-lg-1 mui-text-center">
                                <a class="third-show" data-creditid="{{ creditObj.id }}" data-url="{{ creditObj.licenseUrl }}">License</a>
                            </div>
                        </div>
                    </section>
                    <section class="mui-row">
                        <div class="third-licence" data-creditid="{{ creditObj.id }}">
                            <!--协议内容-->
                        </div>
                    </section>
                </li>
            {{/each}}
            </ul>
        </div>

    </div>
</script>


<!--基础库加载-->
<script src="common/underscore/1.8.3/underscore-min.js"></script>
<script src="common/jquery/jquery-1.12.1.min.js" onload="(function(){ try{window.$ = window.jQuery = module.exports;}catch(e){}})();"></script>
<script src="common/jquery/jquery-json/2.5.1/jquery.json.min.js"></script>
<script src="common/jquery/layer-v1.9.3/layer.js"></script>
<script src="common/jquery/PrintArea/js/jquery.printarea.js"></script>

<!--核心启动加载-->
<script src="js/util.js"></script>
<script src="js/bs.js"></script>

<!--加载国际化-->
<script src="common/format.js/intl/1.0.0/Intl.min.js"></script>
<script src="common/format.js/intl-messageformat/1.1.0/intl-messageformat-with-locales.min.js"></script>

<!--加载路由设置-->
<script src="common/director.js/director.min.js"></script>
<script src="common/mui/mui-0.1.2/js/mui.min.js"></script>
<script src="common/artTemplate/3.0/template.js"></script>
<script src="common/editor.md/1.5.0/editor.md/editormd.min.js"></script>

<!--引入Backbone.js-->
<script src="common/Backbone.js/1.2.3/backbone-min.js"></script>



<!--插件部分加载-->
<script src="js/plugins/plugin.iap.js"></script>
<script src="js/plugins/plugin.cache.js"></script>
<script src="js/plugins/plugin.files-cache.js"></script>
<script src="js/plugins/plugin.user-settings.js"></script>
<script src="js/plugins/plugin.file-editor-mgr.js"></script>
<script src="js/plugins/plugin.editormd.js"></script>

<!--App-->
<script src="js/app.js"></script>
<script type="text/javascript">
    window.UI.c$.launch();
</script>
</body>
</html>