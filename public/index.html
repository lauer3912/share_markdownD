<!DOCTYPE html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MarkdownD</title>

    <link rel="stylesheet" type="text/css" media="screen" href="styles/fonts/style.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="common/editor.md/1.3/editor.md/css/editormd.min.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="common/mui/mui-0.0.5/css/mui.min.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="styles/style.css"/>
</head>
<body>
<div id="g-wrapper">
    <header id="app-header" class="header-shadow">
        <nav class="mui-appbar" role="navigation">
            <div class="mui-container">
                <a id="appbar-sidenav-toggle" href="#/leftNav"><i class="icon-menu"></i></a>
            </div>
        </nav>
    </header>
    <div class="mui-appbar-height"></div>
    <div class="mui-container app-content-container">
        <div id="view-files" style="display: none"></div>
        <div id="view-workspace" style="display: none"></div>
        <div id="view-plugins" style="display: none"></div>
        <div id="view-settings" style="display: none"></div>
        <div id="view-help" style="display: none"></div>
    </div>
    <div id="leftNav" style="display: none"></div>
    <input id="g-input-file" type="file" class="mui-form-control" style="display: none">
</div>


<script id="tpl_leftNav" type='text/html'>
    <!--左侧导航-->
    <nav id="sidenav">
        <ul>
            {{each navList as value i}}
            <li>
                <button class="mui-btn mui-btn-default mui-btn-flat mui-text-left {{ value.class  }}"
                        onclick="window.location.href='{{ value.href }}'"> {{ value.name }}
                </button>
            </li>
            {{/each}}
        </ul>
    </nav>
</script>

<script id="tpl_files" type='text/html'>
    <!--文件视图-->
    <div class="mui-panel">
        <ul>
            {{each files as obj i}}
            <li data-id="fileId_{{ obj.id }}">
                <section class="mui-row">

                    <span class="mui-col-md-8 mui-col-xs-8">
                        <div class="mui-row">
                            <i class="mui-col-md-1 mui-col-xs-1">
                                <label>{{ i+1 }}</label>
                            </i>
                            <i class="mui-col-md-3 mui-col-xs-3">
                                <input type="text" class="mui-form-control" data-id="{{ obj.id }}" data-field="name" value="{{ obj.name }}">
                            </i>
                            <i class="mui-col-md-8 mui-col-xs-8">
                                <input type="text" class="mui-form-control mui-text-center" data-id="{{ obj.id }}" data-field="path" value="{{ obj.path }}" readonly>
                            </i>
                        </div>

                    </span>
                    <li class="mui-col-md-4 mui-col-xs-4">
                        <fieldset>
                            <button class="mui-btn mui-btn-default mui-btn-flat icon-edit" onclick="window.UI.c$.UIActions.loadFile('{{ obj.id  }}')">Load</button>
                            <button class="mui-btn mui-btn-default mui-btn-flat icon-save" onclick="window.UI.c$.UIActions.saveFile('{{ obj.id }}')">Save</button>
                            <button class="mui-btn mui-btn-default mui-btn-flat icon-remove-circle-outline" onclick="window.UI.c$.UIActions.removeFilesItem('{{  obj.id }}')">Remove</button>
                        </fieldset>
                    </li>
                </section>
            </li>
            {{/each}}
        </ul>
        <button class="mui-btn mui-btn-default mui-btn-raised" onclick="window.UI.c$.UIActions.createNew()">New File</button>
        <button class="mui-btn mui-btn-default mui-btn-raised" onclick="window.UI.c$.UIActions.importFiles()">Import Files</button>
        <p>
            <em class="icon-live-help">Note:</em>
            Your changes and your files only get stored in cache. If you want save files changes, please to save file.
        </p>
    </div>
</script>

<script id="tpl_workspace" type='text/html'>
    <!--主要编辑器部分-->
    <div class="mui-panel">
        <div id="test-editormd">
            <textarea style="display:none;"></textarea>
        </div>
    </div>
</script>

<script id="tpl_pluginsMgr" type='text/html'>
    <!--插件视图-->
    <div class="mui-panel">
        {{each plugins as obj i}}
        <section class="mui-col-lg-2 mui-col-md-4 mui-col-xs-6 mui-panel">
            <header>
                <a rel target="_blank">
                    <img class="plugin-screen" src="{{ obj.img }}">
                </a>
            </header>
            <span>{{ obj.name }}</span>
            <div>
                <span class="mui-text-caption">{{ obj.description }}</span>
            </div>

            {{if obj.enable}}
            <div class="ribbon">
                <i class="icon-check"></i>
            </div>
            {{/if }}
            <a>
                {{if (obj.quantity == 0 && obj.inAppStore == true)}}
                <button class="mui-btn mui-btn-default mui-btn-raised"
                        onclick="window.UI.c$.UIActions.buyPlugin('{{ obj.id }}')"><i class="icon-shopping-basket">Purchase</i>
                </button>
                {{else}}
                <button class="mui-btn mui-btn-default mui-btn-flat" disabled>
                </button>
                {{/if}}
            </a>
        </section>
        {{/each}}

    </div>
</script>



<script src="common/es6-shim/es6-shim.min.js"></script>
<script src="common/jquery/jquery-1.11.2.min.js"></script>

<script src="common/editor.md/1.3/editor.md/editormd.min.js"></script>
<!-- 多语言和自定义工具栏的整合测试 -->
<script src="common/editor.md/1.3/editor.md/languages/en.js"></script>

<!--加载路由设置-->
<script src="common/knockoutjs/3.3.0/knockout-3.3.0.js"></script>
<script src="common/director.js/director.min.js"></script>
<script src="common/mui/mui-0.0.5/js/mui.min.js"></script>
<script src="common/artTemplate/3.0/template.js"></script>

<!--核心启动加载-->
<script src="js/util.js"></script>
<script src="js/bs.js"></script>
<script src="js/IAP/plugins_define.js"></script>
<script src="js/files_cache.js"></script>
<script src="js/app.js"></script>
<script src="js/test.js"></script>
<script type="text/javascript">
    window.UI.c$.launch()
</script>
</body>
</html>